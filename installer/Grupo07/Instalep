#!/bin/bash
GRUPO=$(pwd)

# Set directory default values
DIRBIN="bin"
DIRMAE="mae"
DIRREC="nov"
DIROK="ok"
DIRPROC="imp"
DIRINFO="rep"
DIRLOG="log"
DIRNOK="nok"
VALID="N"

# Updates reserved values list
update_reserved() {
  RESERVED="$DIRBIN $DIRMAE $DIRREC $DIROK $DIRPROC $DIRINFO $DIRLOG $DIRNOK" 
}

update_reserved
clear
echo -e "###\tInstalador del sistema EPLAM\t###\n"
echo -e "- Para aceptar las opciones por default (), solamente presione enter.\n"
echo -e "- Todos los directorios deben ser ingresados sin '/' al inicio ni al final ( Ej: midir/misubdir ).\n"
echo -e "- El directorio ingresado sera relativo a: $GRUPO\n\n"
## Request exec directory
while [ $VALID == "N" ]; do
  ## Prompt for exec directory
  read -p "Defina el directorio de ejecutables ($GRUPO/$DIRBIN): " UINPUT 
  ## Validate user input
  if [ ! -z "$UINPUT" -a "$UINPUT" != " " ]; then
    VALID="Y"
    for rname in $RESERVED; do
      if [ $UINPUT == $rname ]; then
	echo -e "# El nombre $UINPUT se encuentra reservado\n"
	VALID="N"
	break
      fi
    done
    ## If name not reserved
    if [ $VALID == "Y" ]; then
      DIRBIN="/$UINPUT" 
      update_reserved
    fi
  else
    VALID="Y"
  fi
done
VALID="N"
